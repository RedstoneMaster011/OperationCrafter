{
    "name": "Play Sound File (Beeps)",
    "color": "#e67e22",
    "group": "Sound",
    "asm_code": "jmp after_snd_{ID}\nsnd_raw_{ID}:\n%include '{FILE}'\nafter_snd_{ID}:\nmov si, snd_raw_{ID}\ncall play_sound_engine", "inputs": [{ "name": "FILE", "default": "music.asm" }, { "name": "ID", "default": "1" }], "req_funcs": ["play_sound_engine:\n    pusha\n    lodsw\n    mov cx, ax\n    jcxz .done\n.note_loop:\n    push cx\n    lodsw\n    mov bx, ax\n    lodsw\n    mov bp, ax\n    or bx, bx\n    jz .quiet\n    mov al, 0xB6\n    out 0x43, al\n    mov ax, 0x34DD\n    mov dx, 0x0012\n    div bx\n    out 0x42, al\n    mov al, ah\n    out 0x42, al\n    in al, 0x61\n    or al, 3\n    out 0x61, al\n    jmp .wait\n.quiet:\n    in al, 0x61\n    and al, 0xFC\n    out 0x61, al\n.wait:\n    mov ax, 1000\n    mul bp\n    mov dx, ax\n    xor cx, cx\n    mov ah, 0x86\n    int 0x15\n    pop cx\n    loop .note_loop\n.done:\n    in al, 0x61\n    and al, 0xFC\n    out 0x61, al\n    popa\n    ret"],
    "req_funcs": [
        "play_sound_engine:\n    pusha\n    lodsw\n    mov cx, ax\n    jcxz .done\n.note_loop:\n    push cx\n    lodsw\n    mov bx, ax\n    lodsw\n    mov bp, ax\n    or bx, bx\n    jz .silence\n    mov al, 0xB6\n    out 0x43, al\n    mov ax, 1193180\n    xor dx, dx\n    div bx\n    out 0x42, al\n    mov al, ah\n    out 0x42, al\n    in al, 0x61\n    or al, 3\n    out 0x61, al\n.delay:\n    mov ax, 1000\n    mul bp\n    mov dx, ax\n    xor cx, cx\n    mov ah, 0x86\n    int 0x15\n    in al, 0x61\n    and al, 0xFC\n    out 0x61, al\n    pop cx\n    loop .note_loop\n    jmp .done\n.silence:\n    mov ax, 1000\n    mul bp\n    mov dx, ax\n    xor cx, cx\n    mov ah, 0x86\n    int 0x15\n    pop cx\n    loop .note_loop\n.done:\n    popa\n    ret"
    ],
    "inputs": [
        { "name": "ID", "default": "1" },
        { "name": "FILE", "default": "sound.asm" }
    ]
}